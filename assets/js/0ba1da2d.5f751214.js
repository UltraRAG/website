"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[108],{9319(e,s,n){n.r(s),n.d(s,{default:()=>ts});var t=n(6540),i=n(6025);const l="demoContainer_ryNF",a="sidebar_kzhx",r="sidebarCollapsed_aHN1",o="sidebarHeader_GJAu",c="sidebarToggleRow_FCvB",d="logoLink_Tm9p",h="logoImg_bOJl",u="toggleBtn_rufA",p="toggleBtnRotated_B7u9",m="navBtn_No_P",x="navIcon_Iml1",j="navText_n5e0",g="sessionList_XX5B",v="sessionLabel_dPXV",_="sessionItem_RiEI",N="sessionActive_lDZb",C="sessionTitle_EoAg",k="sidebarFooter_Vyd8",A="chatMain_Pa8Z",f="viewHeader_01jP",R="pipelineDropdownWrapper_ZRzX",b="btnPipelineSelect_IsE1",w="pipelineName_BnBs",S="pipelineSubtext_FGHG",M="pipelineMenu_ggld",P="pipelineMenuItem__afh",G="pipelineMenuItemActive_rBgB",L="pipelineCheck_LIOp",y="chatContainer_hBnD",B="chatContainerEmpty_sGeY",U="chatHistory_YlMT",T="chatBubble_GR1s",I="chatBubbleUser_JOtg",W="chatBubbleAssistant_WRam",$="msgContent_OVas",Y="mdP_Wgwa",D="mdH2_ohAJ",H="mdH3_stox",E="mdBlockquote_a4rp",V="mdUl_IZVO",O="mdLi_sewr",q="inlineCode_PIYe",F="codeBlockWrapper_zP81",K="codeBlockHeader_RgVw",z="codeBlockLang_WY3u",Q="codeBlockCopy_EfYW",J="copied_Ui2c",X="codeBlockPre_f_UD",Z="processContainer_KqKR",ee="processHeader_HCLn",se="processHeaderDot_IwM8",ne="processCollapsed_ucBO",te="processHeaderText_MJ1o",ie="processChevron_uKwn",le="processChevronOpen_et3q",ae="processBody_AEsp",re="processStep_qDDa",oe="stepTitle_Qh3D",ce="stepDetails_CE0J",de="referenceContainer_D_aR",he="refItem_fdL_",ue="refUsed_Cjny",pe="refUnused_lhAh",me="refId_LI94",xe="refTitle_NR7V",je="unusedRefsSection_Xh3g",ge="unusedToggle_I5Yh",ve="unusedChevronOpen_Beeh",_e="chatInputWrapper_rVM3",Ne="chatInputContainer_vbYm",Ce="chatInput_F9B0",ke="actionsRow_IjG9",Ae="leftActions_gKea",fe="rightActions_eFUl",Re="kbSelectorPill_I8NS",be="btnSend_X4FR",we="emptyStateWrapper_Y1HF",Se="greetingSection_Dzvr",Me="greetingGradient_KPD7",Pe="greetingSub_wU3Y",Ge="suggestionGrid_MYYQ",Le="suggestionCard_y0E1",ye="suggestionCardTop_Ok9Q",Be="suggestionCardIcon_rQLK",Ue="suggestionCardTitle_VmEL",Te="suggestionCardSub_ygP7",Ie="aiThinking_yBni",We="aiThinkingDot_VWpO",$e="toast_qnbs",Ye="toastIcon_nBey";var De=n(4848);const He=[{name:"LLM",id:"llm"},{name:"RAG",id:"rag"},{name:"LightResearch",id:"lightresearch"},{name:"AgentCPM-Report",id:"agentcpm-report"}],Ee=[{id:1,title:"UltraRAG \u9879\u76ee\u7b80\u4ecb"},{id:2,title:"MCP \u67b6\u6784\u8be6\u89e3"},{id:3,title:"Pipeline \u7f16\u6392\u6307\u5357"}],Ve={1:[{role:"user",content:"\u8bf7\u4ecb\u7ecd\u4e00\u4e0b UltraRAG \u662f\u4ec0\u4e48\uff1f"},{role:"assistant",steps:[{name:"Query Analysis",detail:"\u89e3\u6790\u7528\u6237\u95ee\u9898\uff0c\u63d0\u53d6\u5173\u952e\u610f\u56fe"},{name:"Dense Retrieval",detail:"\u4ece\u77e5\u8bc6\u5e93\u4e2d\u68c0\u7d22\u9879\u76ee\u6587\u6863"},{name:"Response Generation",detail:"\u57fa\u4e8e\u68c0\u7d22\u7ed3\u679c\u751f\u6210\u56de\u7b54"}],content:"UltraRAG \u662f\u9996\u4e2a\u57fa\u4e8e **Model Context Protocol (MCP)** \u67b6\u6784\u8bbe\u8ba1\u7684\u8f7b\u91cf\u7ea7 RAG \u5f00\u53d1\u6846\u67b6\uff0c\u4e13\u4e3a\u79d1\u7814\u63a2\u7d22\u4e0e\u5de5\u4e1a\u539f\u578b\u8bbe\u8ba1\u6253\u9020\u3002\n\n\u5b83\u5c06 RAG \u4e2d\u7684\u6838\u5fc3\u7ec4\u4ef6\uff08\u5982 Retriever\u3001Generation \u7b49\uff09\u6807\u51c6\u5316\u5c01\u88c5\u4e3a\u72ec\u7acb\u7684 **MCP Server**\uff0c\u5b9e\u73b0\u4e86\u57fa\u4e8e\u51fd\u6570\u7ea7 Tool \u63a5\u53e3\u7684\u7075\u6d3b\u6269\u5c55\u3002\u914d\u5408 MCP Client \u7684\u6d41\u7a0b\u8c03\u5ea6\u80fd\u529b\uff0c\u5f00\u53d1\u8005\u80fd\u591f\u901a\u8fc7 YAML \u914d\u7f6e\u5b9e\u73b0\u5bf9\u590d\u6742\u63a7\u5236\u7ed3\u6784\uff08\u5982\u6761\u4ef6\u3001\u5faa\u73af\u7b49\uff09\u7684\u7cbe\u786e\u7f16\u6392\u3002\n\n### \u6838\u5fc3\u67b6\u6784\n\nUltraRAG \u7531\u56db\u4e2a\u5173\u952e\u7ec4\u4ef6\u6784\u6210\uff1a\n\n- **Pipeline \xb7 \u6d41\u7a0b\u5b9a\u4e49**\uff1a\u7528\u6237\u901a\u8fc7 YAML \u7f16\u5199\u7684\u4efb\u52a1\u903b\u8f91\uff0c\u5b9a\u4e49\u4e86\u5404\u7ec4\u4ef6\u7684\u6267\u884c\u987a\u5e8f\u4e0e\u4e1a\u52a1\u903b\u8f91\uff0c\u5b9e\u73b0\u63a8\u7406\u6d41\u7a0b\u7684\u914d\u7f6e\u5316\n- **Client \xb7 \u8c03\u5ea6\u4e2d\u67a2**\uff1a\u8d1f\u8d23\u89e3\u6790 Pipeline \u914d\u7f6e\uff0c\u7edf\u4e00\u534f\u8c03\u5404 Server \u95f4\u5de5\u5177\u7684\u8c03\u7528\u4e0e\u6570\u636e\u4f20\u9012\uff0c\u786e\u4fdd\u6d41\u7a0b\u7cbe\u51c6\u6267\u884c\n- **Server \xb7 \u529f\u80fd\u6267\u884c**\uff1a\u5c06\u6838\u5fc3\u529f\u80fd\u6807\u51c6\u5316\u5c01\u88c5\u4e3a\u72ec\u7acb\u670d\u52a1\uff0c\u652f\u6301\u901a\u8fc7\u7b80\u5355\u63a5\u53e3\u5b9e\u73b0\u65b0\u6a21\u5757\u7684\u5feb\u901f\u6269\u5c55\u4e0e\u7075\u6d3b\u7ec4\u5408\n- **UI \xb7 \u4ea4\u4e92\u6f14\u793a**\uff1a\u5c06 YAML \u5b9a\u4e49\u7684\u903b\u8f91\u4e00\u952e\u8f6c\u5316\u4e3a\u76f4\u89c2\u7684\u5bf9\u8bdd\u754c\u9762\uff0c\u663e\u8457\u63d0\u5347\u7cfb\u7edf\u7684\u8c03\u8bd5\u6548\u7387\u4e0e\u6f14\u793a\u6548\u679c\n\n> \u7cfb\u7edf\u652f\u6301\u7b97\u6cd5\u903b\u8f91\u5411\u5bf9\u8bdd\u6f14\u793a\u754c\u9762\u7684\u65e0\u7f1d\u8fc1\u79fb\uff0c\u6781\u5927\u5730\u4f18\u5316\u4e86\u590d\u6742 RAG \u7cfb\u7edf\u7684\u5f00\u53d1\u5168\u94fe\u8def\u6548\u7387\u3002",sources:[{id:1,title:"UltraRAG \u9879\u76ee\u7b80\u4ecb",used:!0},{id:2,title:"MCP \u67b6\u6784\u8bbe\u8ba1\u6587\u6863",used:!0},{id:3,title:"Getting Started Guide",used:!0}]},{role:"user",content:"\u4e3a\u4ec0\u4e48\u8981\u9009\u62e9 UltraRAG\uff1f"},{role:"assistant",steps:[{name:"Intent Recognition",detail:"\u8bc6\u522b\u7528\u6237\u5bf9\u6bd4\u9700\u6c42"},{name:"Doc Retrieval",detail:"\u68c0\u7d22 Why UltraRAG \u6587\u6863"},{name:"Answer Synthesis",detail:"\u6574\u5408\u6838\u5fc3\u4f18\u52bf\u8bf4\u660e"}],content:"RAG \u7cfb\u7edf\u6b63\u7ecf\u5386\u4ece\u9759\u6001\u94fe\u5f0f\u4e32\u8054\u5411\u81ea\u4e3b\u63a8\u7406\u4f53\u7cfb\u7684\u8303\u5f0f\u6f14\u8fdb\uff0c\u6108\u53d1\u4f9d\u8d56\u6a21\u578b\u7684\u4e3b\u52a8\u63a8\u7406\u3001\u52a8\u6001\u68c0\u7d22\u4e0e\u6761\u4ef6\u51b3\u7b56\u3002\u7136\u800c\u4f20\u7edf\u6846\u67b6\u5f80\u5f80\u9762\u4e34\u7075\u6d3b\u6027\u4e0d\u8db3\u3001\u6a21\u5757\u6df1\u5ea6\u8026\u5408\u7b49\u74f6\u9888\u3002\n\nUltraRAG \u65e8\u5728\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u4e00\u5957**\u6807\u51c6\u5316\u3001\u89e3\u8026\u4e14\u6781\u7b80**\u7684\u5f00\u53d1\u65b0\u8303\u5f0f\uff1a\n\n### \ud83d\ude80 \u4f4e\u4ee3\u7801\u7f16\u6392\u590d\u6742\u6d41\u7a0b\n\u539f\u751f\u652f\u6301\u4e32\u884c\u3001\u5faa\u73af\u4e0e\u6761\u4ef6\u5206\u652f\u7b49\u63a7\u5236\u7ed3\u6784\u3002\u5f00\u53d1\u8005\u4ec5\u9700\u7f16\u5199 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u5373\u53ef\u5728\u6570\u5341\u884c\u4ee3\u7801\u5185\u5b9e\u73b0\u590d\u6742\u7684\u8fed\u4ee3\u5f0f RAG \u903b\u8f91\u3002\n\n### \u26a1 \u6a21\u5757\u5316\u6269\u5c55\u4e0e\u590d\u73b0\n\u57fa\u4e8e MCP \u67b6\u6784\u5c06\u529f\u80fd\u89e3\u8026\u4e3a\u72ec\u7acb Server\u3002\u65b0\u529f\u80fd\u4ec5\u9700\u4ee5\u51fd\u6570\u7ea7 Tool \u5f62\u5f0f\u6ce8\u518c\uff0c\u5373\u53ef\u65e0\u7f1d\u63a5\u5165\u6d41\u7a0b\uff0c\u5b9e\u73b0\u6781\u9ad8\u7684\u590d\u7528\u6027\u3002\n\n### \ud83d\udcca \u7edf\u4e00\u8bc4\u6d4b\u4e0e\u57fa\u51c6\u5bf9\u6bd4\n\u5185\u7f6e\u6807\u51c6\u5316\u8bc4\u6d4b\u6d41\u7a0b\uff0c\u5f00\u7bb1\u5373\u7528\u4e3b\u6d41\u79d1\u7814 Benchmark\u3002\u901a\u8fc7\u7edf\u4e00\u6307\u6807\u7ba1\u7406\u4e0e\u57fa\u7ebf\u96c6\u6210\uff0c\u5927\u5e45\u63d0\u5347\u5b9e\u9a8c\u7684\u53ef\u590d\u73b0\u6027\u4e0e\u5bf9\u6bd4\u6548\u7387\u3002\n\n### \u2728 \u4ea4\u4e92\u539f\u578b\u5feb\u901f\u751f\u6210\n\u544a\u522b\u7e41\u7410\u7684 UI \u5f00\u53d1\u3002\u4ec5\u9700\u4e00\u884c\u547d\u4ee4\uff0c\u5373\u53ef\u5c06 Pipeline \u903b\u8f91\u77ac\u95f4\u8f6c\u5316\u4e3a\u53ef\u4ea4\u4e92\u7684\u5bf9\u8bdd\u5f0f Web UI\uff0c\u7f29\u77ed\u4ece\u7b97\u6cd5\u5230\u6f14\u793a\u7684\u8ddd\u79bb\u3002\n\n> UltraRAG \u6253\u7834\u4e86\u4f20\u7edf\u6846\u67b6\u7684\u50f5\u5c40\uff0c\u8ba9\u7814\u7a76\u8005\u80fd\u591f\u9ad8\u6548\u590d\u73b0\u4e0e\u6a2a\u5411\u5bf9\u6bd4\u5404\u79cd RAG \u65b9\u6848\u3002",sources:[{id:1,title:"Why UltraRAG - \u9879\u76ee\u7b80\u4ecb",used:!0},{id:2,title:"UltraRAG vs \u4f20\u7edf\u6846\u67b6\u5bf9\u6bd4",used:!0},{id:3,title:"MCP \u67b6\u6784\u4f18\u52bf\u5206\u6790",used:!1}]}],2:[{role:"user",content:"UltraRAG \u7684 MCP \u67b6\u6784\u662f\u600e\u4e48\u8bbe\u8ba1\u7684\uff1f"},{role:"assistant",steps:[{name:"Query Understanding",detail:"\u8bc6\u522b\u7528\u6237\u5bf9\u67b6\u6784\u7684\u5174\u8da3"},{name:"Knowledge Retrieval",detail:"\u68c0\u7d22 MCP \u67b6\u6784\u8bbe\u8ba1\u6587\u6863"}],content:'UltraRAG \u57fa\u4e8e **Model Context Protocol (MCP)** \u67b6\u6784\u8bbe\u8ba1\uff0c\u5c06 RAG \u7cfb\u7edf\u7684\u6838\u5fc3\u80fd\u529b\u62c6\u89e3\u4e3a\u6807\u51c6\u5316\u7684\u670d\u52a1\u5355\u5143\uff1a\n\n### MCP Server \u2014 \u539f\u5b50\u5316\u80fd\u529b\u8f7d\u4f53\n\u6bcf\u4e2a MCP Server \u5c01\u88c5\u4e00\u9879\u72ec\u7acb\u529f\u80fd\uff0c\u5982\u6587\u6863\u68c0\u7d22\u3001\u5411\u91cf\u7d22\u5f15\u3001\u6587\u672c\u751f\u6210\u7b49\u3002\u65b0\u529f\u80fd\u53ea\u9700\u4ee5\u51fd\u6570\u7ea7 **Tool** \u5f62\u5f0f\u6ce8\u518c\u5230 Server \u4e2d\uff0c\u5373\u53ef\u65e0\u7f1d\u63a5\u5165\u6574\u4e2a\u6d41\u7a0b\uff1a\n\n```python\n@server.register_tool\ndef dense_retrieve(query: str, top_k: int = 5):\n    """\u4ece\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u6700\u76f8\u5173\u7684\u6587\u6863\u7247\u6bb5"""\n    return retriever.search(query, top_k=top_k)\n```\n\n### MCP Client \u2014 \u667a\u80fd\u8c03\u5ea6\u4e2d\u67a2\nClient \u8d1f\u8d23\u89e3\u6790 Pipeline \u914d\u7f6e\u6587\u4ef6\uff0c\u7edf\u4e00\u534f\u8c03\u5404 Server \u95f4\u5de5\u5177\u7684\u8c03\u7528\u4e0e\u6570\u636e\u4f20\u9012\u3002\u5b83\u652f\u6301\uff1a\n- **\u4e32\u884c\u6267\u884c**\uff1a\u6309\u987a\u5e8f\u4f9d\u6b21\u8c03\u7528\u5404\u6b65\u9aa4\n- **\u6761\u4ef6\u5206\u652f**\uff1a\u6839\u636e\u4e2d\u95f4\u7ed3\u679c\u52a8\u6001\u9009\u62e9\u8def\u5f84\n- **\u5faa\u73af\u8fed\u4ee3**\uff1a\u652f\u6301\u591a\u8f6e\u68c0\u7d22-\u63a8\u7406\u7684\u81ea\u6211\u4fee\u6b63\n\n### \u6838\u5fc3\u4f18\u52bf\n- **\u89e3\u8026\u6027**\uff1aServer \u4e4b\u95f4\u5b8c\u5168\u72ec\u7acb\uff0c\u53ef\u5355\u72ec\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\n- **\u53ef\u6269\u5c55\u6027**\uff1a\u65b0\u589e\u6a21\u5757\u96f6\u4fb5\u5165\uff0c\u6ce8\u518c Tool \u5373\u5b8c\u6210\u96c6\u6210\n- **\u53ef\u590d\u73b0\u6027**\uff1a\u76f8\u540c Pipeline YAML + Server \u914d\u7f6e = \u5b8c\u5168\u76f8\u540c\u7684\u6267\u884c\u7ed3\u679c\n\n> MCP \u67b6\u6784\u8ba9 RAG \u7cfb\u7edf\u7684\u6bcf\u4e00\u4e2a\u73af\u8282\u90fd\u53d8\u5f97\u900f\u660e\u3001\u53ef\u63a7\u4e14\u53ef\u590d\u73b0\u3002',sources:[{id:1,title:"MCP \u67b6\u6784\u8bbe\u8ba1\u6587\u6863",used:!0},{id:2,title:"Server \u5f00\u53d1\u6307\u5357",used:!0}]}],3:[{role:"user",content:"Pipeline \u662f\u600e\u4e48\u7f16\u6392\u7684\uff1f\u53ef\u4ee5\u4e3e\u4e2a\u4f8b\u5b50\u5417\uff1f"},{role:"assistant",steps:[{name:"Doc Search",detail:"\u68c0\u7d22 Pipeline \u7f16\u6392\u6587\u6863"},{name:"Synthesis",detail:"\u6574\u5408 YAML \u914d\u7f6e\u8bf4\u660e\u4e0e\u793a\u4f8b"}],content:"Pipeline \u662f UltraRAG \u7684\u6838\u5fc3\u84dd\u56fe\uff0c\u901a\u8fc7 YAML \u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49 RAG \u6d41\u7a0b\u4e2d\u5404\u4e2a\u6b65\u9aa4\u53ca\u5176\u8fde\u63a5\u5173\u7cfb\u3002\u5f00\u53d1\u8005\u65e0\u9700\u7f16\u5199\u590d\u6742\u7684\u8c03\u5ea6\u4ee3\u7801\uff0c\u53ea\u9700\u58f0\u660e\u5f0f\u5730\u63cf\u8ff0\u4efb\u52a1\u903b\u8f91\u3002\n\n\u4e00\u4e2a\u5178\u578b\u7684 RAG Pipeline \u914d\u7f6e\uff1a\n\n```yaml\nname: NaiveRAG\nsteps:\n  - name: retrieve\n    server: retrieval_server\n    tool: dense_retrieve\n    params:\n      top_k: 5\n  - name: generate\n    server: generation_server\n    tool: chat_completion\n    input:\n      context: $retrieve.output\n```\n\n### \u652f\u6301\u7684\u63a7\u5236\u7ed3\u6784\nUltraRAG \u539f\u751f\u652f\u6301\u590d\u6742\u7684\u6d41\u7a0b\u63a7\u5236\uff1a\n\n- **\u4e32\u884c\uff08Sequential\uff09**\uff1a\u6b65\u9aa4\u6309\u987a\u5e8f\u4f9d\u6b21\u6267\u884c\uff0c\u4e0a\u6e38\u8f93\u51fa\u901a\u8fc7 `$` \u5f15\u7528\u4f20\u9012\u7ed9\u4e0b\u6e38\n- **\u6761\u4ef6\u5206\u652f\uff08Branch\uff09**\uff1a\u6839\u636e\u4e2d\u95f4\u7ed3\u679c\u52a8\u6001\u9009\u62e9\u4e0d\u540c\u7684\u6267\u884c\u8def\u5f84\n- **\u5faa\u73af\u8fed\u4ee3\uff08Loop\uff09**\uff1a\u5b9e\u73b0\u591a\u8f6e\u68c0\u7d22-\u63a8\u7406\u7684\u81ea\u6211\u4fee\u6b63\u903b\u8f91\n\n### \u4e00\u952e\u751f\u6210\u4ea4\u4e92 UI\n\u7f16\u5199\u5b8c Pipeline YAML \u540e\uff0c\u53ea\u9700\u4e00\u884c\u547d\u4ee4\u5373\u53ef\u5c06\u5176\u8f6c\u5316\u4e3a\u53ef\u4ea4\u4e92\u7684\u5bf9\u8bdd\u754c\u9762\uff1a\n\n```bash\nultrarag show ui --admin\n```\n\n> Pipeline \u5b9e\u73b0\u4e86\u63a8\u7406\u6d41\u7a0b\u7684\u914d\u7f6e\u5316\uff0c\u8ba9\u5f00\u53d1\u8005\u80fd\u591f\u5728\u6570\u5341\u884c YAML \u5185\u5b8c\u6210\u590d\u6742\u8fed\u4ee3\u5f0f RAG \u903b\u8f91\u7684\u6784\u5efa\u3002",sources:[{id:1,title:"Pipeline \u7f16\u6392\u6307\u5357",used:!0},{id:2,title:"YAML \u914d\u7f6e\u53c2\u8003",used:!0}]}]},Oe=[{steps:[{name:"Query Analysis",detail:"\u5206\u6790\u7528\u6237\u95ee\u9898"},{name:"Dense Retrieval",detail:"\u4ece\u77e5\u8bc6\u5e93\u4e2d\u68c0\u7d22\u76f8\u5173\u6587\u6863"},{name:"Response Generation",detail:"\u57fa\u4e8e\u68c0\u7d22\u7ed3\u679c\u751f\u6210\u56de\u7b54"}],content:"\u611f\u8c22\u60a8\u7684\u63d0\u95ee\uff01\u8fd9\u662f\u4e00\u4e2a Demo \u6f14\u793a\u73af\u5883\uff0c\u5c55\u793a\u4e86 UltraRAG \u7684\u5bf9\u8bdd\u4ea4\u4e92\u754c\u9762\u3002\n\nUltraRAG \u662f\u9996\u4e2a\u57fa\u4e8e **MCP\uff08Model Context Protocol\uff09** \u67b6\u6784\u7684\u8f7b\u91cf\u7ea7 RAG \u5f00\u53d1\u6846\u67b6\u3002\u5728\u5b9e\u9645\u90e8\u7f72\u4e2d\uff0c\u7cfb\u7edf\u4f1a\uff1a\n- \u901a\u8fc7 **MCP Server** \u4ece\u60a8\u7684\u77e5\u8bc6\u5e93\u4e2d\u68c0\u7d22\u76f8\u5173\u6587\u6863\u7247\u6bb5\n- \u7531 **MCP Client** \u534f\u8c03 Pipeline \u7f16\u6392\u7684\u591a\u6b65\u63a8\u7406\u6d41\u7a0b\n- \u57fa\u4e8e\u68c0\u7d22\u5230\u7684\u4e8b\u5b9e\u751f\u6210\u9ad8\u8d28\u91cf\u3001**\u53ef\u6eaf\u6e90**\u7684\u56de\u7b54\n\n> \u5982\u9700\u4f53\u9a8c\u5b8c\u6574\u529f\u80fd\uff0c\u8bf7\u8bbf\u95ee [UltraRAG \u6587\u6863](https://ultrarag.openbmb.cn) \u4e86\u89e3\u672c\u5730\u90e8\u7f72\u65b9\u5f0f\u3002",sources:[{id:1,title:"UltraRAG \u9879\u76ee\u7b80\u4ecb",used:!0},{id:2,title:"\u5feb\u901f\u5f00\u59cb\u6307\u5357",used:!0}]}],qe=[{icon:"\ud83d\ude80",text:"UltraRAG \u662f\u4ec0\u4e48\uff1f",sub:"\u4e86\u89e3\u57fa\u4e8e MCP \u67b6\u6784\u7684 RAG \u6846\u67b6"},{icon:"\u26a1",text:"\u4e3a\u4ec0\u4e48\u9009\u62e9 UltraRAG\uff1f",sub:"\u4f4e\u4ee3\u7801\u7f16\u6392\u3001\u6a21\u5757\u5316\u6269\u5c55\u3001\u7edf\u4e00\u8bc4\u6d4b"},{icon:"\ud83d\udd27",text:"Pipeline \u600e\u4e48\u7f16\u6392\uff1f",sub:"YAML \u914d\u7f6e\u5b9e\u73b0\u590d\u6742 RAG \u903b\u8f91"},{icon:"\ud83d\udca1",text:"MCP \u67b6\u6784\u5982\u4f55\u8bbe\u8ba1\uff1f",sub:"Server \u89e3\u8026\u4e0e Client \u8c03\u5ea6"}];function Fe({message:e,visible:s,onClose:n}){return(0,t.useEffect)(()=>{if(s){const e=setTimeout(n,2500);return()=>clearTimeout(e)}},[s,n]),s?(0,De.jsxs)("div",{className:$e,children:[(0,De.jsx)("span",{className:Ye,children:"\u2139"}),(0,De.jsx)("span",{children:e})]}):null}function Ke({collapsed:e,onToggle:s,activeSession:n,sessions:t,onSessionChange:l,onNewChat:A,onShowToast:f}){const R=(0,i.Ay)("img/ultrarag.svg"),b=(0,i.Ay)("/");return(0,De.jsxs)("aside",{className:`${a} ${e?r:""}`,children:[(0,De.jsxs)("div",{className:o,children:[(0,De.jsxs)("div",{className:c,children:[!e&&(0,De.jsx)("a",{href:b,className:d,children:(0,De.jsx)("img",{src:R,alt:"UltraRAG",className:h})}),(0,De.jsx)("button",{className:`${u} ${e?p:""}`,onClick:s,title:"Toggle Sidebar",children:(0,De.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,De.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,De.jsx)("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]})})]}),(0,De.jsxs)("button",{className:m,onClick:A,children:[(0,De.jsx)("span",{className:x,children:(0,De.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:"20",height:"20",children:(0,De.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),!e&&(0,De.jsx)("span",{className:j,children:"\u65b0\u5efa\u5bf9\u8bdd"})]}),(0,De.jsxs)("button",{className:m,onClick:()=>f("\u77e5\u8bc6\u5e93\u7ba1\u7406\u529f\u80fd\u8bf7\u5728\u672c\u5730\u90e8\u7f72\u540e\u4f7f\u7528"),children:[(0,De.jsx)("span",{className:x,children:(0,De.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:"20",height:"20",children:(0,De.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),!e&&(0,De.jsx)("span",{className:j,children:"\u77e5\u8bc6\u5e93"})]})]}),!e&&(0,De.jsxs)("div",{className:g,children:[(0,De.jsx)("div",{className:v,children:"\u6700\u8fd1\u5bf9\u8bdd"}),t.map(e=>(0,De.jsx)("div",{className:`${_} ${e.id===n?N:""}`,onClick:()=>l(e.id),children:(0,De.jsx)("span",{className:C,children:e.title})},e.id))]}),(0,De.jsx)("div",{className:k,children:(0,De.jsxs)("button",{className:m,onClick:()=>f("\u8bbe\u7f6e\u529f\u80fd\u8bf7\u5728\u672c\u5730\u90e8\u7f72\u540e\u4f7f\u7528"),children:[(0,De.jsx)("span",{className:x,children:(0,De.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:"20",height:"20",children:[(0,De.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.332.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.217.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.583-.495.645-.869l.214-1.281z"}),(0,De.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),!e&&(0,De.jsx)("span",{className:j,children:"\u8bbe\u7f6e"})]})})]})}function ze({steps:e}){const[s,n]=(0,t.useState)(!0);return(0,De.jsxs)("div",{className:`${Z} ${s?ne:""}`,children:[(0,De.jsxs)("div",{className:ee,onClick:()=>n(!s),children:[(0,De.jsx)("span",{className:se}),(0,De.jsx)("span",{className:te,children:"\u601d\u8003\u8fc7\u7a0b"}),(0,De.jsx)("svg",{className:`${ie} ${s?"":le}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,De.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),!s&&(0,De.jsx)("div",{className:ae,children:e.map((e,s)=>(0,De.jsxs)("div",{className:re,children:[(0,De.jsx)("div",{className:oe,children:(0,De.jsx)("span",{children:e.name})}),e.detail&&(0,De.jsx)("div",{className:ce,children:e.detail})]},s))})]})}function Qe({sources:e}){const[s,n]=(0,t.useState)(!1),i=e.filter(e=>e.used),l=e.filter(e=>!e.used);return(0,De.jsxs)("div",{className:de,children:[i.map(e=>(0,De.jsxs)("div",{className:`${he} ${ue}`,children:[(0,De.jsxs)("span",{className:me,children:["[",e.id,"]"]}),(0,De.jsx)("span",{className:xe,children:e.title})]},e.id)),l.length>0&&(0,De.jsxs)("div",{className:je,children:[(0,De.jsxs)("button",{className:ge,onClick:()=>n(!s),children:[(0,De.jsxs)("span",{children:[s?"\u6536\u8d77":"\u5c55\u5f00"," ",l.length," \u4e2a\u672a\u5f15\u7528\u6587\u6863"]}),(0,De.jsx)("svg",{className:s?ve:"",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,De.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),s&&l.map(e=>(0,De.jsxs)("div",{className:`${he} ${pe}`,children:[(0,De.jsxs)("span",{className:me,children:["[",e.id,"]"]}),(0,De.jsx)("span",{className:xe,children:e.title})]},e.id))]})]})}function Je(e){const s=e.split("\n"),n=[];let t=0,i=0;for(;t<s.length;){const e=s[t];if(e.startsWith("```")){const l=e.slice(3).trim(),a=[];for(t++;t<s.length&&!s[t].startsWith("```");)a.push(s[t]),t++;t++,n.push((0,De.jsxs)("div",{className:F,children:[(0,De.jsxs)("div",{className:K,children:[(0,De.jsx)("span",{className:z,children:l||"text"}),(0,De.jsxs)("button",{className:Q,onClick:e=>{const s=a.join("\n");navigator.clipboard.writeText(s).then(()=>{e.currentTarget.classList.add(J),setTimeout(()=>e.currentTarget.classList.remove(J),2e3)})},children:[(0,De.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,De.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,De.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),(0,De.jsx)("span",{children:"\u590d\u5236"})]})]}),(0,De.jsx)("pre",{className:X,children:(0,De.jsx)("code",{children:a.join("\n")})})]},i++));continue}if(e.startsWith("### "))n.push((0,De.jsx)("h3",{className:H,children:e.slice(4)},i++)),t++;else if(e.startsWith("## "))n.push((0,De.jsx)("h2",{className:D,children:e.slice(3)},i++)),t++;else if(e.startsWith("> "))n.push((0,De.jsx)("blockquote",{className:E,children:Xe(e.slice(2))},i++)),t++;else{if(e.startsWith("- ")){const e=[];for(;t<s.length&&s[t].startsWith("- ");)e.push(s[t].slice(2)),t++;n.push((0,De.jsx)("ul",{className:V,children:e.map((e,s)=>(0,De.jsx)("li",{className:O,children:Xe(e)},s))},i++));continue}""!==e.trim()?(n.push((0,De.jsx)("p",{className:Y,children:Xe(e)},i++)),t++):t++}}return n}function Xe(e){const s=[];let n=e,t=0;for(;n.length>0;){const e=n.match(/\*\*(.+?)\*\*/),i=n.match(/`(.+?)`/);let l=null,a=null;if(e&&i?e.index<i.index?(l=e,a="bold"):(l=i,a="code"):e?(l=e,a="bold"):i&&(l=i,a="code"),!l){s.push((0,De.jsx)("span",{children:n},t++));break}l.index>0&&s.push((0,De.jsx)("span",{children:n.substring(0,l.index)},t++)),"bold"===a?s.push((0,De.jsx)("strong",{children:l[1]},t++)):s.push((0,De.jsx)("code",{className:q,children:l[1]},t++)),n=n.substring(l.index+l[0].length)}return s}function Ze({message:e}){return"user"===e.role?(0,De.jsx)("div",{className:`${T} ${I}`,children:(0,De.jsx)("div",{className:$,children:e.content})}):(0,De.jsxs)("div",{className:`${T} ${W}`,children:[e.steps&&(0,De.jsx)(ze,{steps:e.steps}),(0,De.jsx)("div",{className:$,children:Je(e.content)}),e.sources&&e.sources.length>0&&(0,De.jsx)(Qe,{sources:e.sources})]})}function es({onSuggestionClick:e}){return(0,De.jsxs)("div",{className:we,children:[(0,De.jsxs)("div",{className:Se,children:[(0,De.jsx)("span",{className:Me,children:"\u63a2\u7d22 UltraRAG"}),(0,De.jsx)("p",{className:Pe,children:"\u57fa\u4e8e MCP \u67b6\u6784\u7684\u8f7b\u91cf\u7ea7 RAG \u5f00\u53d1\u6846\u67b6"})]}),(0,De.jsx)("div",{className:Ge,children:qe.map((s,n)=>(0,De.jsxs)("button",{className:Le,onClick:()=>e(s.text),children:[(0,De.jsxs)("div",{className:ye,children:[(0,De.jsx)("span",{className:Be,children:s.icon}),(0,De.jsx)("span",{className:Ue,children:s.text})]}),(0,De.jsx)("span",{className:Te,children:s.sub})]},n))})]})}function ss({pipelineIdx:e,onPipelineSelect:s}){const[n,i]=(0,t.useState)(!1),l=(0,t.useRef)(null),a=He[e];return(0,t.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&i(!1)}if(n)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n]),(0,De.jsxs)("div",{className:R,ref:l,children:[(0,De.jsxs)("button",{className:b,onClick:()=>i(!n),children:[(0,De.jsx)("span",{className:w,children:a.name}),(0,De.jsx)("span",{className:S,children:"UltraRAG"}),(0,De.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:.4,transform:n?"rotate(180deg)":"none",transition:"transform 0.2s"},children:(0,De.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),n&&(0,De.jsx)("div",{className:M,children:He.map((n,t)=>(0,De.jsxs)("button",{className:`${P} ${t===e?G:""}`,onClick:()=>{s(t),i(!1)},children:[(0,De.jsx)("span",{children:n.name}),t===e&&(0,De.jsx)("span",{className:L,children:"\u2713"})]},n.id))})]})}function ns({messages:e,onSendMessage:s,pipelineIdx:n,onPipelineSelect:i,onShowToast:l,isEmpty:a}){const r=(0,t.useRef)(null),[o,c]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),u=(0,t.useRef)(null);(0,t.useEffect)(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e,d]),(0,t.useEffect)(()=>{u.current&&(u.current.style.height="auto",u.current.style.height=u.current.scrollHeight+"px")},[o]);const p=(0,t.useCallback)(e=>{const n=e||o.trim();n&&!d&&(c(""),h(!0),s(n),setTimeout(()=>h(!1),1500))},[o,d,s]),m=(0,t.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},[p]);return(0,De.jsxs)("div",{className:A,children:[(0,De.jsx)("header",{className:f,children:(0,De.jsx)(ss,{pipelineIdx:n,onPipelineSelect:i})}),(0,De.jsxs)("div",{className:`${y} ${a?B:""}`,children:[(0,De.jsx)("div",{className:U,ref:r,children:a?(0,De.jsx)(es,{onSuggestionClick:e=>p(e)}):(0,De.jsxs)(De.Fragment,{children:[e.map((e,s)=>(0,De.jsx)(Ze,{message:e},s)),d&&(0,De.jsx)("div",{className:`${T} ${W}`,children:(0,De.jsxs)("div",{className:Ie,children:[(0,De.jsx)("span",{className:We}),(0,De.jsx)("span",{className:We}),(0,De.jsx)("span",{className:We})]})})]})}),(0,De.jsx)("div",{className:_e,children:(0,De.jsxs)("div",{className:Ne,children:[(0,De.jsx)("textarea",{ref:u,className:Ce,placeholder:"\u5411 UltraRAG \u63d0\u95ee...",rows:"1",value:o,onChange:e=>c(e.target.value),onKeyDown:m}),(0,De.jsxs)("div",{className:ke,children:[(0,De.jsx)("div",{className:Ae,children:(0,De.jsxs)("button",{className:Re,onClick:()=>l("\u77e5\u8bc6\u5e93\u5207\u6362\u529f\u80fd\u8bf7\u5728\u672c\u5730\u90e8\u7f72\u540e\u4f7f\u7528"),children:[(0,De.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,De.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,De.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),(0,De.jsx)("span",{children:"\u6280\u672f\u6587\u6863\u77e5\u8bc6\u5e93"})]})}),(0,De.jsx)("div",{className:fe,children:(0,De.jsx)("button",{className:be,onClick:()=>p(),disabled:d||!o.trim(),children:(0,De.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,De.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),(0,De.jsx)("polyline",{points:"5 12 12 5 19 12"})]})})})]})]})})]})]})}function ts(){const[e,s]=(0,t.useState)(!1),[n,i]=(0,t.useState)(1),[a,r]=(0,t.useState)(0),[o,c]=(0,t.useState)(Ve),[d,h]=(0,t.useState)(Ee),[u,p]=(0,t.useState)(""),[m,x]=(0,t.useState)(!1),j=o[n]||[],g=0===j.length,v=(0,t.useCallback)(e=>{p(e),x(!0)},[]),_=(0,t.useCallback)(e=>{i(e)},[]),N=(0,t.useCallback)(()=>{const e=Date.now();c(s=>({...s,[e]:[]})),h(s=>[{id:e,title:"\u65b0\u5bf9\u8bdd"},...s]),i(e),v("\u5df2\u521b\u5efa\u65b0\u5bf9\u8bdd")},[v]),C=(0,t.useCallback)(e=>{r(e),v(`\u5df2\u5207\u6362\u5230 ${He[e].name}`)},[v]),k=(0,t.useCallback)(e=>{c(s=>({...s,[n]:[...s[n]||[],{role:"user",content:e}]})),h(s=>s.map(s=>s.id===n&&"\u65b0\u5bf9\u8bdd"===s.title?{...s,title:e.slice(0,20)+(e.length>20?"...":"")}:s)),setTimeout(()=>{const e=Oe[0];c(s=>({...s,[n]:[...s[n]||[],{role:"assistant",...e}]}))},1500)},[n]);return(0,De.jsxs)("div",{className:l,children:[(0,De.jsx)(Ke,{collapsed:e,onToggle:()=>s(!e),activeSession:n,sessions:d,onSessionChange:_,onNewChat:N,onShowToast:v}),(0,De.jsx)(ns,{messages:j,onSendMessage:k,pipelineIdx:a,onPipelineSelect:C,onShowToast:v,isEmpty:g}),(0,De.jsx)(Fe,{message:u,visible:m,onClose:()=>x(!1)})]})}}}]);